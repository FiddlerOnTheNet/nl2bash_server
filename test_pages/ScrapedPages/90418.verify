Exit Shell Script Based on Process Exit Code
ls -al file.ext
rc=$?; if [[ $rc != 0 ]]; then exit $rc; fi
ls -al file.ext | sed 's/^/xx: /"
pax> false | true ; echo ${PIPESTATUS[0]}
1
pax> false | true | false; echo ${PIPESTATUS[*]}
1 0 1
true | true | false | true | false
rcs=${PIPESTATUS[*]}; rc=0; for i in ${rcs}; do rc=$(($i > $rc ? $i : $rc)); done
echo $rc
