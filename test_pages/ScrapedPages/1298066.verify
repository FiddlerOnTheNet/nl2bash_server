{"title":"Check if a package is installed and then install it if it\u0027s not","commands":["dpkg -s \u003cpackagename\u003e \u0026\u0026 dpkg-query -l \u003cpackagename\u003e \u0026\u0026 dpkg -S `which \u003ccommand\u003e` \u0026\u0026 ","PKG_OK\u003d$(dpkg-query -W --showformat\u003d\u0027${Status}\\n\u0027 the.package.name|grep \"install ok installed\")\necho Checking for somelib: $PKG_OK\nif [ \"\" \u003d\u003d \"$PKG_OK\" ]; then\n  echo \"No somelib. Setting up somelib.\"\n  sudo apt-get --force-yes --yes install the.package.name\nfi \u0026\u0026 ","$(dpkg-query -W -f\u003d\u0027${Status}\u0027 nano 2\u003e/dev/null | grep -c \"ok installed\") \u0026\u0026 if [ $(dpkg-query -W -f\u003d\u0027${Status}\u0027 nano 2\u003e/dev/null | grep -c \"ok installed\") -eq 0 ];\nthen\n  apt-get install nano;\nfi \u0026\u0026 ","~$ dpkg-query -l apache-perl\n~$ echo $?\n1 \u0026\u0026 ~$ dpkg-query -l libreoffice\n~$ echo $?\n0 \u0026\u0026 ~$ dpkg-query -l domy-ce\n~$ echo $?\n0\n~$ sudo apt-get remove domy-ce\n[sudo] password for user: \nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nPackage domy-ce is not installed, so not removed\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded. \u0026\u0026 ","dpkg -s \u003cpkg-name\u003e 2\u003e/dev/null \u003e/dev/null || sudo apt-get -y install \u003cpkg-name\u003e \u0026\u0026 "]}