{"title":"How to detect if my shell script is running through a pipe?","commands":["if [ -t 1 ] ; then echo terminal; else echo \"not a terminal\"; fi \u0026\u0026 (if [ -t 1 ] ; then echo terminal; else echo \"not a terminal\"; fi) | cat \u0026\u0026 0:     stdin  \n1:     stdout  \n2:     stderr \u0026\u0026 ","[[ -t 1 ]] \u0026\u0026 \\\n    echo \u0027STDOUT is attached to TTY\u0027\n\n[[ -p /dev/stdout ]] \u0026\u0026 \\\n    echo \u0027STDOUT is attached to a pipe\u0027\n\n[[ ! -t 1 \u0026\u0026 ! -p /dev/stdout ]] \u0026\u0026 \\\n    echo \u0027STDOUT is attached to a redirection\u0027 \u0026\u0026 # CORRECT: Forced-tty mode correctly reports \u00271\u0027, which represents\n# no pipe.\nssh -t localhost \u0027[[ -p /dev/stdin ]]; echo ${?}\u0027\n\n# CORRECT: Issuing a piped command in forced-tty mode correctly\n# reports \u00270\u0027, which represents a pipe.\nssh -t localhost \u0027echo hi | [[ -p /dev/stdin ]]; echo ${?}\u0027\n\n# INCORRECT: Non-tty mode reports \u00270\u0027, which represents a pipe,\n# even though one isn\u0027t specified here.\nssh -T localhost \u0027[[ -p /dev/stdin ]]; echo ${?}\u0027 \u0026\u0026 ssh -t localhost \u0027echo piped | cat - \u003c( echo substituted )\u0027\nssh -T localhost \u0027echo piped | cat - \u003c( echo substituted )\u0027 \u0026\u0026 ","if [ -t 1 ]; then\n    # stdout is a tty\nfi \u0026\u0026 ","#!/bin/bash\n\nif [[ -t 1 ]]; then\n    # stdout is a terminal\nelse\n    # stdout is not a terminal\nfi \u0026\u0026 ","[[ -t 1 ]] \u0026\u0026 \\\n    echo \u0027STDOUT is attached to TTY\u0027\n\n[[ -p /dev/stdout ]] \u0026\u0026 \\\n    echo \u0027STDOUT is attached to a pipe\u0027\n\n[[ ! -t 1 \u0026\u0026 ! -p /dev/stdout ]] \u0026\u0026 \\\n    echo \u0027STDOUT is attached to a redirection\u0027 \u0026\u0026 :$ ./bash_redir_test.sh\nSTDOUT is attached to TTY\n\n:$ ./bash_redir_test.sh | xargs echo\nSTDOUT is attached to a pipe\n\n:$ rm bash_redir_test.log \n:$ ./bash_redir_test.sh \u003e\u003e bash_redir_test.log\n\n:$ tail bash_redir_test.log \nSTDOUT is attached to a redirection \u0026\u0026 :# ./bash_redir_test.sh\nSTDOUT is attached to TTY\n\n:# ./bash_redir_test.sh | xargs echo\nSTDOUT is attached to a redirection\n\n:# rm bash_redir_test.log \nbash_redir_test.log: No such file or directory\n\n:# ./bash_redir_test.sh \u003e\u003e bash_redir_test.log\n:# tail bash_redir_test.log \nSTDOUT is attached to a redirection\n\n:# \u0026\u0026 "]}